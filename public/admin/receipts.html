<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipts - Alhudha Haj Travel Admin</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #f5f7fa;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        .admin-header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-area i {
            font-size: 2rem;
            color: #f1c40f;
        }

        .logo-area h1 {
            color: white;
            font-size: 1.5rem;
        }

        .role-badge {
            background: #f1c40f;
            color: #2c3e50;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        /* Page Header */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0 20px;
        }

        .page-header h2 {
            color: #2c3e50;
            font-size: 1.8rem;
        }

        .page-header h2 i {
            color: #f1c40f;
            margin-right: 10px;
        }

        /* Action Buttons */
        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #219a52;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-2px);
        }

        .btn-info {
            background: #00bcd4;
            color: white;
        }

        .btn-info:hover {
            background: #00a5bb;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }

        .stat-card i {
            font-size: 2rem;
            color: #f1c40f;
            margin-bottom: 10px;
        }

        .stat-card h3 {
            font-size: 1rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
        }

        /* Receipt Card */
        .receipt-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            transition: all 0.3s;
        }
        
        .receipt-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .receipt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .receipt-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .receipt-date {
            color: #7f8c8d;
        }
        
        .receipt-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .receipt-detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .receipt-detail-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .receipt-detail-value {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .receipt-amount {
            font-size: 1.3rem;
            font-weight: bold;
            color: #27ae60;
        }
        
        .receipt-installment {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            background: #e1f0fa;
            color: #2980b9;
            margin-left: 10px;
        }
        
        .receipt-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }
        
        .btn-view {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-print-receipt {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-email-receipt {
            background: #f39c12;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .receipt-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .receipt-badge-paid {
            background: #d4edda;
            color: #155724;
        }
        
        .receipt-badge-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .receipt-badge-advance {
            background: #cce5ff;
            color: #004085;
        }
        
        .receipt-badge-final {
            background: #d1e7dd;
            color: #0f5132;
        }
        
        /* Search and Filters */
        .receipt-search {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .receipt-search input,
        .receipt-search select {
            padding: 10px;
            border: 2px solid #ecf0f1;
            border-radius: 5px;
            font-size: 1rem;
            flex: 1;
            min-width: 200px;
        }
        
        .date-range {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .date-range input {
            width: 150px;
        }

        /* Create Receipt Form */
        .create-receipt-form {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: none;
        }
        
        .create-receipt-form h3 {
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .form-group label i {
            margin-right: 8px;
            color: #f1c40f;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ecf0f1;
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }
        
        .form-group input[readonly] {
            background: #e9ecef;
            cursor: not-allowed;
        }
        
        .payment-summary {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #3498db;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .summary-row:last-child {
            border-bottom: none;
        }
        
        .summary-row.total {
            font-size: 1.2rem;
            font-weight: bold;
            color: #27ae60;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 2px solid #3498db;
        }
        
        .installment-info {
            background: #e1f0fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .installment-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2980b9;
            display: inline-block;
            margin-right: 10px;
        }

        /* Receipt Print Template */
        .receipt-print-template {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .receipt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #3498db;
        }

        .receipt-logo h2 {
            color: #1e3c72;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .receipt-logo p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .receipt-title {
            text-align: right;
        }

        .receipt-title h1 {
            color: #3498db;
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .receipt-title p {
            color: #7f8c8d;
            font-size: 1rem;
        }

        .receipt-address {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .receipt-to h4,
        .receipt-from h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .receipt-to p,
        .receipt-from p {
            color: #34495e;
            line-height: 1.6;
            margin-bottom: 5px;
        }

        .receipt-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .meta-item {
            text-align: center;
        }

        .meta-item .label {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .meta-item .value {
            color: #2c3e50;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .receipt-items {
            margin-bottom: 30px;
        }

        .receipt-items table {
            width: 100%;
            border-collapse: collapse;
        }

        .receipt-items th {
            background: #2c3e50;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .receipt-items td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
        }

        .receipt-summary {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .amount-in-words {
            margin-top: 15px;
            padding: 10px;
            background: #e8f4f8;
            border-radius: 5px;
            color: #2c3e50;
            font-style: italic;
        }

        .receipt-footer {
            text-align: center;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .signature-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .signature {
            text-align: center;
        }

        .signature-line {
            margin-top: 40px;
            border-top: 1px solid #2c3e50;
            width: 200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .modal-header h3 {
            color: #2c3e50;
        }
        
        .close {
            font-size: 2rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .close:hover {
            color: #e74c3c;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid #ecf0f1;
        }

        /* Print Styles */
        @media print {
            .admin-header, .receipt-search, .stats-grid, .action-btn, 
            .logout-btn, .modal-footer, .btn-view, .btn-print-receipt, 
            .btn-email-receipt, .icon-btn, .page-header button,
            .create-receipt-form, .pagination {
                display: none !important;
            }

            .receipt-print-template {
                box-shadow: none;
                padding: 0;
            }

            .receipt-address, .receipt-meta, .receipt-summary {
                break-inside: avoid;
            }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            z-index: 9999;
            display: none;
            animation: slideIn 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification-success { background: #27ae60; }
        .notification-error { background: #e74c3c; }
        .notification-info { background: #3498db; }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .receipt-search {
                flex-direction: column;
            }
            .receipt-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .receipt-actions {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <div class="container">
            <div class="header-content">
                <div class="logo-area">
                    <i class="fas fa-kaaba"></i>
                    <h1>Alhudha Haj Admin - Receipts</h1>
                    <span class="role-badge" id="roleBadge">Admin</span>
                </div>
                <div>
                    <a href="dashboard.html" class="action-btn btn-info" style="margin-right: 10px; display: inline-flex;">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                    <button onclick="logout()" class="logout-btn" style="display: inline-flex;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="page-header">
            <h2><i class="fas fa-receipt"></i> Receipt Management</h2>
            <div>
                <button class="btn-success" onclick="toggleCreateReceiptForm()" style="margin-right: 10px;">
                    <i class="fas fa-plus"></i> Create New Receipt
                </button>
                <button class="btn-primary" onclick="exportReceipts()">
                    <i class="fas fa-file-excel"></i> Export
                </button>
            </div>
        </div>

        <!-- Create New Receipt Form -->
        <div id="createReceiptForm" class="create-receipt-form">
            <h3><i class="fas fa-plus-circle"></i> Create New Payment Receipt</h3>
            <form id="receiptCreateForm" onsubmit="event.preventDefault(); generateReceipt();">
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Select Traveler *</label>
                        <select id="receiptTravelerSelect" required onchange="loadTravelerReceiptDetails()">
                            <option value="">-- Select Traveler --</option>
                            <option value="1" data-passport="A1234567" data-batch="Haj Platinum 2026" data-batch-id="1" data-total="901425" data-paid="180285" data-pending="721140" data-installments="2">Ahmed Khan (A1234567) - Haj Platinum 2026</option>
                            <option value="2" data-passport="B7654321" data-batch="Haj Gold 2026" data-batch-id="2" data-total="583275" data-paid="583275" data-pending="0" data-installments="1">Fatima Begum (B7654321) - Haj Gold 2026</option>
                            <option value="3" data-passport="C9876543" data-batch="Umrah Ramadhan" data-batch-id="3" data-total="132562" data-paid="26512" data-pending="106050" data-installments="1">Mohammed Rafiq (C9876543) - Umrah Ramadhan</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-passport"></i> Passport Number</label>
                        <input type="text" id="receiptPassport" readonly>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-layer-group"></i> Batch</label>
                        <input type="text" id="receiptBatch" readonly>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-tag"></i> Receipt Type</label>
                        <select id="receiptType" required onchange="updateInstallmentInfo()">
                            <option value="advance">Advance Payment</option>
                            <option value="installment">Installment Payment</option>
                            <option value="final">Final Settlement</option>
                            <option value="partial">Partial Payment</option>
                        </select>
                    </div>
                </div>

                <!-- Installment Information -->
                <div id="installmentInfo" class="installment-info">
                    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px;">
                        <div>
                            <span class="installment-number" id="installmentNumber">2nd</span>
                            <span>Installment Payment</span>
                        </div>
                        <div>
                            <span class="receipt-badge receipt-badge-paid" id="paidInstallments">2 Paid</span>
                            <span class="receipt-badge receipt-badge-pending" id="pendingInstallments">2 Pending</span>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-calendar"></i> Payment Date *</label>
                        <input type="date" id="receiptDate" required value="2026-02-22">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-money-bill"></i> Payment Method *</label>
                        <select id="receiptPaymentMethod" required>
                            <option value="Cash">Cash</option>
                            <option value="Bank Transfer">Bank Transfer</option>
                            <option value="UPI">UPI</option>
                            <option value="Credit Card">Credit Card</option>
                            <option value="Debit Card">Debit Card</option>
                            <option value="Cheque">Cheque</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-rupee-sign"></i> Amount (₹) *</label>
                        <input type="number" id="receiptAmount" required min="1" step="100" value="85000" onchange="updatePaymentSummary()">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-hashtag"></i> Transaction ID / Reference</label>
                        <input type="text" id="receiptTransactionId" placeholder="Optional">
                    </div>
                </div>

                <!-- Company Address Settings -->
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-building"></i> Company Name</label>
                        <input type="text" id="companyName" value="Alhudha Haj Travel" placeholder="Company Name">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-map-marker-alt"></i> Address Line 1</label>
                        <input type="text" id="companyAddress1" value="123, Haj House" placeholder="Address Line 1">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-map-marker-alt"></i> Address Line 2</label>
                        <input type="text" id="companyAddress2" value="Mumbai - 400001" placeholder="Address Line 2">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-map-marker-alt"></i> City, State, PIN</label>
                        <input type="text" id="companyCityState" value="Maharashtra, India" placeholder="City, State, PIN">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-phone"></i> Phone</label>
                        <input type="text" id="companyPhone" value="+91 98765 43210" placeholder="Phone Number">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" id="companyEmail" value="accounts@alhudha.com" placeholder="Email">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-id-card"></i> GSTIN</label>
                        <input type="text" id="companyGSTIN" value="27ABCDE1234F1Z5" placeholder="GSTIN">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-qrcode"></i> PAN</label>
                        <input type="text" id="companyPAN" value="ABCDE1234F" placeholder="PAN">
                    </div>
                </div>

                <!-- Payment Summary -->
                <div class="payment-summary" id="paymentSummary">
                    <h4 style="margin-bottom: 15px; color: #2c3e50;">Payment Summary</h4>
                    <div class="summary-row">
                        <span>Total Package Amount (incl. GST/TCS):</span>
                        <span class="amount-display" id="displayTotalPackage">₹9,01,425</span>
                    </div>
                    <div class="summary-row">
                        <span>Total Paid Till Date:</span>
                        <span class="amount-display" id="displayTotalPaid">₹1,80,285</span>
                    </div>
                    <div class="summary-row">
                        <span>This Payment Amount:</span>
                        <span class="amount-display" id="displayThisPayment">₹85,000</span>
                    </div>
                    <div class="summary-row">
                        <span>Balance After This Payment:</span>
                        <span class="amount-display" id="displayBalance">₹7,21,140</span>
                    </div>
                    <div class="summary-row total">
                        <span>New Total Paid:</span>
                        <span class="amount-display" id="displayNewTotalPaid">₹2,65,285</span>
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-sticky-note"></i> Remarks / Notes</label>
                    <textarea id="receiptRemarks" rows="2" placeholder="Any additional notes..."></textarea>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                    <button type="submit" class="btn-success">
                        <i class="fas fa-save"></i> Generate Receipt
                    </button>
                    <button type="button" class="btn-secondary" onclick="toggleCreateReceiptForm()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="button" class="btn-primary" onclick="saveAddressTemplate()">
                        <i class="fas fa-save"></i> Save Address Template
                    </button>
                </div>
            </form>
        </div>

        <!-- Receipt Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-receipt"></i>
                <h3>Total Receipts</h3>
                <div class="stat-number" id="totalReceipts">245</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-rupee-sign"></i>
                <h3>Total Amount</h3>
                <div class="stat-number" id="totalReceiptAmount">₹2,85,00,000</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-week"></i>
                <h3>This Week</h3>
                <div class="stat-number" id="weeklyReceipts">18</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-month"></i>
                <h3>This Month</h3>
                <div class="stat-number" id="monthlyReceipts">64</div>
            </div>
        </div>

        <!-- Search and Filters -->
        <div class="receipt-search">
            <input type="text" id="searchReceipt" placeholder="Search by receipt #, traveler name, passport...">
            <select id="receiptTypeFilter">
                <option value="all">All Types</option>
                <option value="advance">Advance Payment</option>
                <option value="installment">Installment</option>
                <option value="final">Final Settlement</option>
                <option value="partial">Partial Payment</option>
            </select>
            <div class="date-range">
                <input type="date" id="fromDate" placeholder="From">
                <span>to</span>
                <input type="date" id="toDate" placeholder="To">
            </div>
            <button class="btn-primary" onclick="searchReceipts()">
                <i class="fas fa-search"></i> Search
            </button>
        </div>

        <!-- Receipts List -->
        <div id="receiptsList">
            <!-- Receipt Card 1 - 1st Installment -->
            <div class="receipt-card">
                <div class="receipt-header">
                    <div>
                        <span class="receipt-number">REC-2026-02-001</span>
                        <span class="receipt-installment">1st Installment</span>
                        <span class="receipt-badge receipt-badge-paid" style="margin-left: 10px;">Paid</span>
                    </div>
                    <span class="receipt-date">21 Feb 2026, 10:30 AM</span>
                </div>
                
                <div class="receipt-details">
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Traveler Name</span>
                        <span class="receipt-detail-value">Ahmed Khan</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Passport No</span>
                        <span class="receipt-detail-value">A1234567</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Batch</span>
                        <span class="receipt-detail-value">Haj Platinum 2026</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Payment Method</span>
                        <span class="receipt-detail-value">Bank Transfer</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Installment</span>
                        <span class="receipt-detail-value">1 of 4</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Amount</span>
                        <span class="receipt-detail-value receipt-amount">₹85,000</span>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn-view" onclick="viewReceipt('REC-2026-02-001')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn-print-receipt" onclick="printReceipt('REC-2026-02-001')">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn-email-receipt" onclick="emailReceipt('REC-2026-02-001')">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="icon-btn" onclick="downloadReceiptPDF('REC-2026-02-001')">
                        <i class="fas fa-file-pdf"></i>
                    </button>
                </div>
            </div>

            <!-- Receipt Card 2 - 2nd Installment -->
            <div class="receipt-card">
                <div class="receipt-header">
                    <div>
                        <span class="receipt-number">REC-2026-02-002</span>
                        <span class="receipt-installment">2nd Installment</span>
                        <span class="receipt-badge receipt-badge-paid" style="margin-left: 10px;">Paid</span>
                    </div>
                    <span class="receipt-date">20 Feb 2026, 3:45 PM</span>
                </div>
                
                <div class="receipt-details">
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Traveler Name</span>
                        <span class="receipt-detail-value">Ahmed Khan</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Passport No</span>
                        <span class="receipt-detail-value">A1234567</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Batch</span>
                        <span class="receipt-detail-value">Haj Platinum 2026</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Payment Method</span>
                        <span class="receipt-detail-value">UPI</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Installment</span>
                        <span class="receipt-detail-value">2 of 4</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Amount</span>
                        <span class="receipt-detail-value receipt-amount">₹85,000</span>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn-view" onclick="viewReceipt('REC-2026-02-002')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn-print-receipt" onclick="printReceipt('REC-2026-02-002')">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn-email-receipt" onclick="emailReceipt('REC-2026-02-002')">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="icon-btn" onclick="downloadReceiptPDF('REC-2026-02-002')">
                        <i class="fas fa-file-pdf"></i>
                    </button>
                </div>
            </div>

            <!-- Receipt Card 3 - Final Payment -->
            <div class="receipt-card">
                <div class="receipt-header">
                    <div>
                        <span class="receipt-number">REC-2026-02-003</span>
                        <span class="receipt-installment">Final Settlement</span>
                        <span class="receipt-badge receipt-badge-paid" style="margin-left: 10px;">Paid</span>
                    </div>
                    <span class="receipt-date">19 Feb 2026, 11:20 AM</span>
                </div>
                
                <div class="receipt-details">
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Traveler Name</span>
                        <span class="receipt-detail-value">Fatima Begum</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Passport No</span>
                        <span class="receipt-detail-value">B7654321</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Batch</span>
                        <span class="receipt-detail-value">Haj Gold 2026</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Payment Method</span>
                        <span class="receipt-detail-value">Bank Transfer</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Installment</span>
                        <span class="receipt-detail-value">Final</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Amount</span>
                        <span class="receipt-detail-value receipt-amount">₹5,83,275</span>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn-view" onclick="viewReceipt('REC-2026-02-003')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn-print-receipt" onclick="printReceipt('REC-2026-02-003')">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn-email-receipt" onclick="emailReceipt('REC-2026-02-003')">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="icon-btn" onclick="downloadReceiptPDF('REC-2026-02-003')">
                        <i class="fas fa-file-pdf"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <div>
                Showing 1 to 3 of <span id="totalReceiptCount">245</span> receipts
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn-secondary" onclick="previousPage()"><i class="fas fa-chevron-left"></i> Previous</button>
                <button class="btn-primary" onclick="nextPage()">Next <i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Receipt View Modal -->
    <div id="receiptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-receipt"></i> Receipt Details</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="receiptDetails" class="modal-body">
                <!-- Dynamic content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn-print-receipt" onclick="printCurrentReceipt()">
                    <i class="fas fa-print"></i> Print Receipt
                </button>
                <button class="btn-primary" onclick="downloadReceiptPDF()">
                    <i class="fas fa-file-pdf"></i> Download PDF
                </button>
                <button class="btn-secondary" onclick="closeModal()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // ==================== GLOBAL VARIABLES ====================
        let companyAddress = {};

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            loadAddressTemplate();
            
            // Set today's date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('receiptDate').value = today;
        });

        // ==================== AUTHENTICATION ====================
        function checkAuth() {
            const isLoggedIn = sessionStorage.getItem('adminLoggedIn');
            if (!isLoggedIn) {
                window.location.href = '/admin.login.html';
                return;
            }
            const userName = sessionStorage.getItem('adminName') || 'Admin';
            userRole = sessionStorage.getItem('adminRole') || 'admin';
            document.getElementById('roleBadge').textContent = userRole;
        }

        // ==================== LOGOUT ====================
        function logout() {
            sessionStorage.clear();
            window.location.href = '/admin.login.html';
        }

        // ==================== NOTIFICATION ====================
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i> ${message}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // ==================== ADDRESS TEMPLATE FUNCTIONS ====================
        function loadAddressTemplate() {
            const savedAddress = localStorage.getItem('companyAddress');
            if (savedAddress) {
                companyAddress = JSON.parse(savedAddress);
                document.getElementById('companyName').value = companyAddress.name || 'Alhudha Haj Travel';
                document.getElementById('companyAddress1').value = companyAddress.address1 || '123, Haj House';
                document.getElementById('companyAddress2').value = companyAddress.address2 || 'Mumbai - 400001';
                document.getElementById('companyCityState').value = companyAddress.cityState || 'Maharashtra, India';
                document.getElementById('companyPhone').value = companyAddress.phone || '+91 98765 43210';
                document.getElementById('companyEmail').value = companyAddress.email || 'accounts@alhudha.com';
                document.getElementById('companyGSTIN').value = companyAddress.gstin || '27ABCDE1234F1Z5';
                document.getElementById('companyPAN').value = companyAddress.pan || 'ABCDE1234F';
            }
        }

        function saveAddressTemplate() {
            companyAddress = {
                name: document.getElementById('companyName').value,
                address1: document.getElementById('companyAddress1').value,
                address2: document.getElementById('companyAddress2').value,
                cityState: document.getElementById('companyCityState').value,
                phone: document.getElementById('companyPhone').value,
                email: document.getElementById('companyEmail').value,
                gstin: document.getElementById('companyGSTIN').value,
                pan: document.getElementById('companyPAN').value
            };
            
            localStorage.setItem('companyAddress', JSON.stringify(companyAddress));
            showNotification('Address template saved successfully!', 'success');
        }

        // ==================== RECEIPT FORM FUNCTIONS ====================
        function toggleCreateReceiptForm() {
            const form = document.getElementById('createReceiptForm');
            if (form.style.display === 'none' || form.style.display === '') {
                form.style.display = 'block';
                form.scrollIntoView({ behavior: 'smooth' });
            } else {
                form.style.display = 'none';
            }
        }

        // ==================== TRAVELER FUNCTIONS ====================
        function loadTravelerReceiptDetails() {
            const select = document.getElementById('receiptTravelerSelect');
            const selectedOption = select.options[select.selectedIndex];
            
            if (selectedOption.value) {
                const passport = selectedOption.getAttribute('data-passport');
                const batch = selectedOption.getAttribute('data-batch');
                const totalPackage = selectedOption.getAttribute('data-total');
                const paidAmount = selectedOption.getAttribute('data-paid');
                const pendingAmount = selectedOption.getAttribute('data-pending');
                const installmentsPaid = selectedOption.getAttribute('data-installments');
                
                document.getElementById('receiptPassport').value = passport || '';
                document.getElementById('receiptBatch').value = batch || '';
                
                document.getElementById('displayTotalPackage').textContent = '₹' + Number(totalPackage).toLocaleString('en-IN');
                document.getElementById('displayTotalPaid').textContent = '₹' + Number(paidAmount).toLocaleString('en-IN');
                document.getElementById('displayBalance').textContent = '₹' + Number(pendingAmount).toLocaleString('en-IN');
                
                document.getElementById('paidInstallments').textContent = installmentsPaid + ' Paid';
                const totalInstallments = 4;
                const pendingInstallments = totalInstallments - installmentsPaid;
                document.getElementById('pendingInstallments').textContent = pendingInstallments + ' Pending';
                
                const nextInstallment = Number(installmentsPaid) + 1;
                const installmentSuffix = getInstallmentSuffix(nextInstallment);
                document.getElementById('installmentNumber').textContent = nextInstallment + installmentSuffix;
                
                updateInstallmentInfo();
                updatePaymentSummary();
            } else {
                document.getElementById('receiptPassport').value = '';
                document.getElementById('receiptBatch').value = '';
            }
        }

        function getInstallmentSuffix(num) {
            if (num === 1) return 'st';
            if (num === 2) return 'nd';
            if (num === 3) return 'rd';
            return 'th';
        }

        function updateInstallmentInfo() {
            const receiptType = document.getElementById('receiptType').value;
            const installmentDiv = document.getElementById('installmentInfo');
            
            if (receiptType === 'installment') {
                installmentDiv.style.display = 'block';
            } else if (receiptType === 'final') {
                installmentDiv.style.display = 'block';
                document.getElementById('installmentNumber').textContent = 'Final';
            } else if (receiptType === 'advance') {
                installmentDiv.style.display = 'block';
                document.getElementById('installmentNumber').textContent = 'Advance';
            } else {
                installmentDiv.style.display = 'block';
                document.getElementById('installmentNumber').textContent = 'Partial';
            }
        }

        function updatePaymentSummary() {
            const amount = parseFloat(document.getElementById('receiptAmount').value) || 0;
            const totalPackageText = document.getElementById('displayTotalPackage').textContent.replace('₹', '').replace(/,/g, '');
            const totalPaidText = document.getElementById('displayTotalPaid').textContent.replace('₹', '').replace(/,/g, '');
            
            const totalPackage = parseFloat(totalPackageText) || 0;
            const totalPaid = parseFloat(totalPaidText) || 0;
            
            const newTotalPaid = totalPaid + amount;
            const balance = totalPackage - newTotalPaid;
            
            document.getElementById('displayThisPayment').textContent = '₹' + amount.toLocaleString('en-IN');
            document.getElementById('displayNewTotalPaid').textContent = '₹' + newTotalPaid.toLocaleString('en-IN');
            document.getElementById('displayBalance').textContent = '₹' + Math.max(0, balance).toLocaleString('en-IN');
        }

        // ==================== RECEIPT GENERATION ====================
        function generateReceipt() {
            const travelerSelect = document.getElementById('receiptTravelerSelect');
            if (!travelerSelect.value) {
                showNotification('Please select a traveler', 'error');
                return;
            }
            
            const amount = document.getElementById('receiptAmount').value;
            if (!amount || amount <= 0) {
                showNotification('Please enter a valid amount', 'error');
                return;
            }
            
            const travelerName = travelerSelect.options[travelerSelect.selectedIndex].text.split(' - ')[0];
            const receiptType = document.getElementById('receiptType').value;
            const receiptDate = document.getElementById('receiptDate').value;
            const paymentMethod = document.getElementById('receiptPaymentMethod').value;
            const transactionId = document.getElementById('receiptTransactionId').value || 'N/A';
            
            const dateObj = new Date(receiptDate);
            const year = dateObj.getFullYear();
            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
            const random = String(Math.floor(Math.random() * 1000)).padStart(3, '0');
            const receiptNumber = `REC-${year}-${month}-${random}`;
            
            let installmentText = '';
            if (receiptType === 'installment') {
                const installmentNum = document.getElementById('installmentNumber').textContent;
                installmentText = `${installmentNum} Installment`;
            } else if (receiptType === 'final') {
                installmentText = 'Final Settlement';
            } else if (receiptType === 'advance') {
                installmentText = 'Advance Payment';
            } else {
                installmentText = 'Partial Payment';
            }
            
            showNotification(`Receipt ${receiptNumber} generated successfully!`, 'success');
            document.getElementById('receiptCreateForm').reset();
            document.getElementById('createReceiptForm').style.display = 'none';
        }

        // ==================== RECEIPT PRINTING ====================
        function printReceipt(id) {
            const receiptData = getReceiptData(id);
            const printWindow = window.open('', '_blank');
            
            printWindow.document.write(`
                <html>
                <head>
                    <title>Receipt ${id}</title>
                    <style>
                        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: #f5f7fa; }
                        .receipt-print-template { max-width: 800px; margin: 0 auto; background: white; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
                        .receipt-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #3498db; }
                        .receipt-logo h2 { color: #1e3c72; margin-bottom: 5px; }
                        .receipt-logo p { color: #7f8c8d; font-size: 0.9rem; }
                        .receipt-title h1 { color: #3498db; font-size: 2rem; margin-bottom: 5px; }
                        .receipt-address { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; }
                        .receipt-meta { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; }
                        .meta-item { text-align: center; }
                        .meta-item .label { color: #7f8c8d; font-size: 0.9rem; margin-bottom: 5px; }
                        .meta-item .value { color: #2c3e50; font-size: 1.1rem; font-weight: 600; }
                        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
                        th { background: #2c3e50; color: white; padding: 12px; text-align: left; }
                        td { padding: 12px; border-bottom: 1px solid #ecf0f1; }
                        .receipt-summary { margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; }
                        .amount-in-words { margin-top: 15px; padding: 10px; background: #e8f4f8; border-radius: 5px; font-style: italic; }
                        .receipt-footer { text-align: center; padding-top: 20px; border-top: 2px solid #ecf0f1; color: #7f8c8d; font-size: 0.9rem; }
                        .signature-area { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px; }
                        .signature { text-align: center; }
                        .signature-line { margin-top: 40px; border-top: 1px solid #2c3e50; width: 200px; margin-left: auto; margin-right: auto; }
                        @media print { body { background: white; padding: 0; } .receipt-print-template { box-shadow: none; padding: 0; } }
                    </style>
                </head>
                <body>
                    ${getReceiptHTML(id, receiptData)}
                </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.print();
        }

        function getReceiptData(id) {
            return {
                number: id,
                date: '21 Feb 2026',
                traveler: 'Ahmed Khan',
                passport: 'A1234567',
                batch: 'Haj Platinum 2026',
                installment: '1st Installment',
                amount: 85000,
                method: 'Bank Transfer',
                transactionId: 'HDFC123456789',
                address: companyAddress
            };
        }

        function getReceiptHTML(id, data) {
            return `
                <div class="receipt-print-template">
                    <div class="receipt-header">
                        <div class="receipt-logo">
                            <h2>${data.address.name || 'ALHUDHA HAJ TRAVEL'}</h2>
                            <p>Payment Receipt</p>
                        </div>
                        <div class="receipt-title">
                            <h1>RECEIPT</h1>
                            <p>${id}</p>
                        </div>
                    </div>

                    <div class="receipt-address">
                        <div class="receipt-from">
                            <h4>Received From:</h4>
                            <p><strong>${data.traveler}</strong></p>
                            <p>Passport: ${data.passport}</p>
                            <p>Batch: ${data.batch}</p>
                        </div>
                        <div class="receipt-to">
                            <h4>Payment Details:</h4>
                            <p>Installment: ${data.installment}</p>
                            <p>Method: ${data.method}</p>
                            <p>Transaction ID: ${data.transactionId}</p>
                        </div>
                    </div>

                    <div class="receipt-meta">
                        <div class="meta-item">
                            <div class="label">Receipt Date</div>
                            <div class="value">${data.date}</div>
                        </div>
                        <div class="meta-item">
                            <div class="label">Amount</div>
                            <div class="value">₹${data.amount.toLocaleString()}</div>
                        </div>
                        <div class="meta-item">
                            <div class="label">Status</div>
                            <div class="value">Paid</div>
                        </div>
                    </div>

                    <div class="receipt-items">
                        <table>
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Amount (₹)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>${data.batch} - ${data.installment}</td>
                                    <td>${data.amount.toLocaleString()}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="receipt-summary">
                        <div style="display: flex; justify-content: space-between; font-weight: bold;">
                            <span>Total Amount:</span>
                            <span>₹${data.amount.toLocaleString()}</span>
                        </div>
                    </div>

                    <div class="amount-in-words">
                        <strong>Amount in words:</strong> Rupees ${numberToWords(data.amount)} only
                    </div>

                    <div class="signature-area">
                        <div class="signature">
                            <p>For ${data.address.name || 'Alhudha Haj Travel'}</p>
                            <div class="signature-line"></div>
                            <p>Authorized Signatory</p>
                        </div>
                        <div class="signature">
                            <p>Receiver's Signature</p>
                            <div class="signature-line"></div>
                            <p>Customer</p>
                        </div>
                    </div>

                    <div class="receipt-footer">
                        <p>This is a computer generated receipt - valid without signature</p>
                        <p>Thank you for choosing Alhudha Haj Travel</p>
                    </div>
                </div>
            `;
        }

        function numberToWords(num) {
            return num.toLocaleString('en-IN') + ' Rupees';
        }

        function printCurrentReceipt() {
            showNotification('Printing receipt...', 'info');
            setTimeout(() => {
                showNotification('Receipt printed successfully', 'success');
            }, 1500);
        }

        // ==================== RECEIPT ACTIONS ====================
        function viewReceipt(id) {
            const receiptData = getReceiptData(id);
            document.getElementById('receiptDetails').innerHTML = getReceiptHTML(id, receiptData);
            document.getElementById('receiptModal').style.display = 'flex';
        }

        function downloadReceiptPDF(id) {
            showNotification(`Generating PDF for receipt ${id}...`, 'info');
            setTimeout(() => {
                showNotification(`Receipt ${id} PDF downloaded`, 'success');
            }, 2000);
        }

        function emailReceipt(id) {
            showNotification(`Sending receipt ${id} via email...`, 'info');
            setTimeout(() => {
                showNotification(`Receipt ${id} emailed successfully`, 'success');
            }, 1500);
        }

        function exportReceipts() {
            showNotification('Exporting receipts...', 'info');
            setTimeout(() => {
                showNotification('Receipts exported successfully!', 'success');
            }, 2000);
        }

        // ==================== SEARCH AND FILTER ====================
        function searchReceipts() {
            showNotification('Searching receipts...', 'info');
        }

        // ==================== PAGINATION ====================
        function previousPage() {
            showNotification('Loading previous page...', 'info');
        }

        function nextPage() {
            showNotification('Loading next page...', 'info');
        }

        function closeModal() {
            document.getElementById('receiptModal').style.display = 'none';
        }

        // ==================== CLOSE MODAL ON OUTSIDE CLICK ====================
        window.onclick = function(event) {
            const modal = document.getElementById('receiptModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
