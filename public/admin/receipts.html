<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipts - Alhudha Haj Travel Admin</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .receipt-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            transition: all 0.3s;
        }
        
        .receipt-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .receipt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .receipt-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .receipt-date {
            color: #7f8c8d;
        }
        
        .receipt-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .receipt-detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .receipt-detail-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .receipt-detail-value {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .receipt-amount {
            font-size: 1.3rem;
            font-weight: bold;
            color: #27ae60;
        }
        
        .receipt-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }
        
        .btn-view {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-print-receipt {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-email-receipt {
            background: #f39c12;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .receipt-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .receipt-badge-paid {
            background: #d4edda;
            color: #155724;
        }
        
        .receipt-badge-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .receipt-search {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .receipt-search input,
        .receipt-search select {
            padding: 10px;
            border: 2px solid #ecf0f1;
            border-radius: 5px;
            font-size: 1rem;
            flex: 1;
            min-width: 200px;
        }
        
        .date-range {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .date-range input {
            width: 150px;
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <div class="container">
            <div class="header-content">
                <div class="logo-area">
                    <i class="fas fa-kaaba"></i>
                    <h1>Alhudha Haj Admin - Receipts</h1>
                    <span class="role-badge" id="roleBadge">Admin</span>
                </div>
                <button onclick="logout()" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="page-header">
            <h2><i class="fas fa-receipt"></i> Receipt Management</h2>
            <button class="action-btn btn-success" onclick="generateBulkReceipts()">
                <i class="fas fa-layer-group"></i> Generate Bulk Receipts
            </button>
        </div>

        <!-- Receipt Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-receipt"></i>
                <h3>Total Receipts</h3>
                <div class="stat-number" id="totalReceipts">245</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-rupee-sign"></i>
                <h3>Total Amount</h3>
                <div class="stat-number" id="totalReceiptAmount">₹2,85,00,000</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-week"></i>
                <h3>This Week</h3>
                <div class="stat-number" id="weeklyReceipts">18</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-month"></i>
                <h3>This Month</h3>
                <div class="stat-number" id="monthlyReceipts">64</div>
            </div>
        </div>

        <!-- Search and Filters -->
        <div class="receipt-search">
            <input type="text" id="searchReceipt" placeholder="Search by receipt #, traveler name, passport...">
            <select id="receiptType">
                <option value="all">All Types</option>
                <option value="payment">Payment Receipt</option>
                <option value="advance">Advance Receipt</option>
                <option value="final">Final Settlement</option>
            </select>
            <div class="date-range">
                <input type="date" id="fromDate" placeholder="From">
                <span>to</span>
                <input type="date" id="toDate" placeholder="To">
            </div>
            <button class="action-btn btn-primary" onclick="searchReceipts()">
                <i class="fas fa-search"></i> Search
            </button>
        </div>

        <!-- Receipts List -->
        <div id="receiptsList">
            <!-- Receipt Card 1 -->
            <div class="receipt-card">
                <div class="receipt-header">
                    <div>
                        <span class="receipt-number">REC-2026-02-001</span>
                        <span class="receipt-badge receipt-badge-paid" style="margin-left: 10px;">Paid</span>
                    </div>
                    <span class="receipt-date">21 Feb 2026, 10:30 AM</span>
                </div>
                
                <div class="receipt-details">
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Traveler Name</span>
                        <span class="receipt-detail-value">Ahmed Khan</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Passport No</span>
                        <span class="receipt-detail-value">A1234567</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Batch</span>
                        <span class="receipt-detail-value">Haj Platinum 2026</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Payment Method</span>
                        <span class="receipt-detail-value">Bank Transfer</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Transaction ID</span>
                        <span class="receipt-detail-value">HDFC123456789</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Amount</span>
                        <span class="receipt-detail-value receipt-amount">₹85,000</span>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn-view" onclick="viewReceipt('REC-001')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn-print-receipt" onclick="printReceipt('REC-001')">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn-email-receipt" onclick="emailReceipt('REC-001')">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="icon-btn" onclick="downloadReceiptPDF('REC-001')">
                        <i class="fas fa-file-pdf"></i>
                    </button>
                </div>
            </div>

            <!-- Receipt Card 2 -->
            <div class="receipt-card">
                <div class="receipt-header">
                    <div>
                        <span class="receipt-number">REC-2026-02-002</span>
                        <span class="receipt-badge receipt-badge-paid" style="margin-left: 10px;">Paid</span>
                    </div>
                    <span class="receipt-date">20 Feb 2026, 3:45 PM</span>
                </div>
                
                <div class="receipt-details">
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Traveler Name</span>
                        <span class="receipt-detail-value">Fatima Begum</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Passport No</span>
                        <span class="receipt-detail-value">B7654321</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Batch</span>
                        <span class="receipt-detail-value">Haj Gold 2026</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Payment Method</span>
                        <span class="receipt-detail-value">UPI</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Transaction ID</span>
                        <span class="receipt-detail-value">UPI987654321</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Amount</span>
                        <span class="receipt-detail-value receipt-amount">₹55,000</span>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn-view" onclick="viewReceipt('REC-002')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn-print-receipt" onclick="printReceipt('REC-002')">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn-email-receipt" onclick="emailReceipt('REC-002')">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="icon-btn" onclick="downloadReceiptPDF('REC-002')">
                        <i class="fas fa-file-pdf"></i>
                    </button>
                </div>
            </div>

            <!-- Receipt Card 3 -->
            <div class="receipt-card">
                <div class="receipt-header">
                    <div>
                        <span class="receipt-number">REC-2026-02-003</span>
                        <span class="receipt-badge receipt-badge-pending" style="margin-left: 10px;">Pending</span>
                    </div>
                    <span class="receipt-date">19 Feb 2026, 11:20 AM</span>
                </div>
                
                <div class="receipt-details">
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Traveler Name</span>
                        <span class="receipt-detail-value">Mohammed Rafiq</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Passport No</span>
                        <span class="receipt-detail-value">C9876543</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Batch</span>
                        <span class="receipt-detail-value">Umrah Ramadhan</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Payment Method</span>
                        <span class="receipt-detail-value">Cash</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Transaction ID</span>
                        <span class="receipt-detail-value">CASH001</span>
                    </div>
                    <div class="receipt-detail-item">
                        <span class="receipt-detail-label">Amount</span>
                        <span class="receipt-detail-value receipt-amount">₹25,000</span>
                    </div>
                </div>
                
                <div class="receipt-actions">
                    <button class="btn-view" onclick="viewReceipt('REC-003')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn-print-receipt" onclick="printReceipt('REC-003')">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn-email-receipt" onclick="emailReceipt('REC-003')">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="icon-btn" onclick="downloadReceiptPDF('REC-003')">
                        <i class="fas fa-file-pdf"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
            <div>
                Showing 1 to 3 of 245 receipts
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="action-btn btn-secondary" onclick="previousPage()"><i class="fas fa-chevron-left"></i> Previous</button>
                <button class="action-btn btn-primary" onclick="nextPage()">Next <i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Receipt View Modal -->
    <div id="receiptModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Receipt Details</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="receiptDetails" class="modal-body" style="text-align: center; padding: 30px;">
                <i class="fas fa-receipt" style="font-size: 4rem; color: #3498db; margin-bottom: 20px;"></i>
                <h2 style="margin-bottom: 10px;">Payment Receipt</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">REC-2026-02-001</p>
                
                <div style="text-align: left; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <p><strong>Date:</strong> 21 Feb 2026</p>
                    <p><strong>Traveler Name:</strong> Ahmed Khan</p>
                    <p><strong>Passport No:</strong> A1234567</p>
                    <p><strong>Batch:</strong> Haj Platinum 2026</p>
                    <p><strong>Amount:</strong> ₹85,000</p>
                    <p><strong>Payment Method:</strong> Bank Transfer</p>
                    <p><strong>Transaction ID:</strong> HDFC123456789</p>
                    <p><strong>Status:</strong> <span class="receipt-badge receipt-badge-paid">Paid</span></p>
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn-print-receipt" onclick="printCurrentReceipt()">
                        <i class="fas fa-print"></i> Print Receipt
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .close {
            font-size: 2rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .close:hover {
            color: #e74c3c;
        }
    </style>

    <script>
        // Check authentication
        document.addEventListener('DOMContentLoaded', function() {
            if (!sessionStorage.getItem('adminLoggedIn')) {
                window.location.href = '/admin.login.html';
            }
        });

        function logout() {
            sessionStorage.clear();
            window.location.href = '/admin.login.html';
        }

        function generateBulkReceipts() {
            showNotification('Bulk receipt generation started', 'info');
            
            setTimeout(() => {
                showNotification('10 receipts generated successfully', 'success');
            }, 2000);
        }

        function searchReceipts() {
            const search = document.getElementById('searchReceipt').value;
            const type = document.getElementById('receiptType').value;
            const from = document.getElementById('fromDate').value;
            const to = document.getElementById('toDate').value;
            
            showNotification('Searching receipts...', 'info');
        }

        function viewReceipt(id) {
            document.getElementById('receiptModal').style.display = 'flex';
        }

        function printReceipt(id) {
            showNotification(`Preparing receipt ${id} for print...`, 'info');
            
            setTimeout(() => {
                showNotification(`Receipt ${id} sent to printer`, 'success');
            }, 1500);
        }

        function printCurrentReceipt() {
            showNotification('Printing receipt...', 'info');
            
            setTimeout(() => {
                showNotification('Receipt printed successfully', 'success');
            }, 1500);
        }

        function emailReceipt(id) {
            showNotification(`Sending receipt ${id} via email...`, 'info');
            
            setTimeout(() => {
                showNotification(`Receipt ${id} emailed successfully`, 'success');
            }, 1500);
        }

        function downloadReceiptPDF(id) {
            showNotification(`Generating PDF for receipt ${id}...`, 'info');
            
            setTimeout(() => {
                showNotification(`Receipt ${id} PDF downloaded`, 'success');
            }, 2000);
        }

        function closeModal() {
            document.getElementById('receiptModal').style.display = 'none';
        }

        function previousPage() {
            showNotification('Loading previous page...', 'info');
        }

        function nextPage() {
            showNotification('Loading next page...', 'info');
        }

        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i> ${message}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db'};
                color: white;
                border-radius: 5px;
                z-index: 9999;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Add animation style
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('receiptModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
